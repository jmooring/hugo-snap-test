{{/* Get Sass resource. */}}
{{ $scss := resources.Get "scss/main.scss" }}

{{/* Transpile to determine cache-busting target path. */}}
{{ $css := $scss | toCSS }}
{{ $cacheBuster := $css.Content | sha1 | first 7 }}
{{ $targetPath := printf "css/style.%s.css" $cacheBuster }}

{{/* Transpile again with options. */}}
{{ $transpiler := default "libsass" site.Params.sass_transpiler }}
{{ $options := dict "targetPath" $targetPath "transpiler" $transpiler }}
{{ $css := $scss | toCSS $options | resources.PostCSS | minify }}
{{ $temp := $css | fingerprint "sha512" }}
<link rel="stylesheet" href="{{ $css.RelPermalink }}" integrity="{{ $temp.Data.Integrity }}" crossorigin="anonymous">
